<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="l10n_ch_qr_code_report_template">
            <t t-call="web.external_layout">
                <t t-set="o" t-value="o.with_context(lang=lang)"/>
                <link type="text/css" rel="stylesheet" href="/l10n_ch/static/src/scss/report_swissqr.css"/>


                 <table class="table table-bordered"    style="position: absolute;
                                                                border-color:black;
                                                                border-width: 1pt 1pt 1pt 1pt;
                                                                border: 1px solid black;
                                                                width: 210mm;
                                                                height: 105mm;
                                                                top: 20mm;
                                                                left:5mm;
                                                                right:5mm;">
                    <tr>
                        <td style="border: 1px solid black;width: 62mm; margin: 5mm;"> 

                            <!-- Receipt Part -->
                            <div style="font-size: 11pt;">
                                <strong>
                                    Receipt
                                </strong>
                            </div>

                            <div class="mt8" style="font-size:6pt;line-height: 9pt;top:12mm;">
                                <strong>
                                    Account / Payable to
                                </strong>
                                <p>
                                    <span style="font-size:8pt;line-height: 9pt;" class="swissqr_text content" t-field="o.company_id.name"/><br/>
                                    <span style="font-size:8pt;line-height: 9pt;" class="swissqr_text content" t-field="o.company_id.street"/><br/>
                                    <span style="font-size:8pt;line-height: 9pt;" class="swissqr_text content" t-field="o.company_id.country_id.code"/>
                                    <span style="font-size:8pt;line-height: 9pt;" class="swissqr_text content" t-field="o.company_id.zip"/>
                                    <span style="font-size:8pt;line-height: 9pt;" class="swissqr_text content" t-field="o.company_id.city"/>
                                </p>
                            </div>
                            

                            <div class="mt16" style="font-size:6pt;line-height: 9pt;">
                                <strong>
                                    Reference number
                                </strong>

                                <p>
                                    <t t-if="o.partner_bank_id.currency_id.name == 'EUR'">
                                        <span class="swissqr_text content" 
                                              t-field="o.l10n_ch_isr_number_spaced"
                                              style="font-size:8pt;"/>
                                    </t>
                                    <t t-if="o.partner_bank_id.currency_id.name == 'CHF'">
                                        <span class="swissqr_text content"
                                              t-field="o.l10n_ch_isr_number_spaced"
                                              style="font-size:8pt;"/>
                                    </t>
                                </p>
                            </div>


                            <div class="mt16" style="font-size:6pt;line-height: 9pt;">
                                <strong>
                                    Payable by
                                </strong>
                                <p>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.name"/><br/>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.street"></span>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.street2"/><br/>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.country_id.code"/>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.zip"/>
                                    <span style="font-size:8pt;" class="swissqr_text content" t-field="o.partner_id.city"/>
                                </p>
                            </div>


                            <div class="row;mt16" style="font-size:8pt;line-height: 11pt;">
                                <div style="position: absolute;top:68mm !important;">
                                    <span><strong>Currency</strong></span><br/>
                                    <span t-field="o.currency_id.name"/>
                                </div>
                                <div style="position: absolute;left: 25mm;top:68mm !important;">
                                    <span><strong>Amount</strong></span><br/>
                                    <t t-set="formated_amount"
                                       t-value="('%.2f' % (o.residual)).split(' ')[0].replace(',',' ')"/>
                                    <span t-esc="formated_amount"/>
                                </div> 
                            </div>


                            <div style="font-size:6pt;line-height:8pt;right: 153mm;
                                        position: absolute;top:85mm !important;">
                                <strong>Acceptance point</strong>
                            </div>

                        </td>


                        <!-- Payment Part -->
                        <td style="border: 1px solid black;margin: 5mm;"> 

                          
                                <span style="font-size: 11pt;">
                                    <strong>Payment part</strong>
                                </span>


                                <img style="position: absolute;
                                            height: 46mm;
                                            width: 46mm;
                                            margin-left: -28mm;
                                            top: 12mm;" 

                                    t-att-src="o.partner_bank_id.build_swiss_code_url(o.residual, o.currency_id.name,o.date_due,o.partner_id,'QRR',(o.partner_bank_id.bank_id.l10n_ch_postal_eur) if (o.partner_bank_id.currency_id.name == 'EUR') else o.partner_bank_id.bank_id.l10n_ch_postal_chf,(o.reference) if (o.reference) else o.number)"/>

                                <img style="position: absolute;
                                            height: 7mm;
                                            width: 7mm;
                                            top: 31.5mm;
                                            left: 82mm;"
                                            class="ch_cross" src="/l10n_ch/static/src/img/CH-Cross_7mm.png"/>

                                <strong style="font-size:8pt;line-height: 11pt;top:5mm !important;margin-left: 30mm;">Account / Payable to</strong> <br/>
                            
                                <div style="font-size:10pt;line-height: 11pt;margin-left:56mm;">
                                    <span t-field="o.company_id.name"/>
                                    <span t-field="o.company_id.name"/><br/>
                                    <span t-field="o.company_id.street"/><br/>
                                    <span t-field="o.company_id.country_id.code"/>
                                    <span t-field="o.company_id.zip"/>
                                    <span t-field="o.company_id.city"/>
                                </div>

                                <div class="mt16" style="font-size:8pt;line-height: 11pt;margin-left:56mm;">
                                    <strong>
                                        Reference number
                                    </strong>

                                    <p>
                                        <t t-if="o.partner_bank_id.currency_id.name == 'EUR'">
                                            <span class="swissqr_text content" 
                                                  t-field="o.l10n_ch_isr_number_spaced"
                                                  style="font-size:10pt;"/>
                                        </t>
                                        <t t-if="o.partner_bank_id.currency_id.name == 'CHF'">
                                            <span class="swissqr_text content"
                                                  t-field="o.l10n_ch_isr_number_spaced"
                                                  style="font-size:10pt;"/>
                                        </t>
                                    </p>
                                </div>

                                <div class="mt16" style="font-size:8pt;line-height: 11pt;margin-left:56mm;">
                                    <strong>Additional information</strong>
                                    <p>
                                        <span style="font-size:10pt;" t-field="o.reference"/>
                                    </p>
                                </div>

                                <div class="mt16" style="font-size:8pt;line-height: 11pt;margin-left:56mm;">
                                    <strong>
                                        Payable by
                                    </strong>
                                    <p>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.name"/><br/>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.street"></span>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.street2"/><br/>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.country_id.code"/>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.zip"/>
                                        <span style="font-size:10pt;" class="swissqr_text content" t-field="o.partner_id.city"/>
                                    </p>
                                </div>

                                
                                <div class="row;mt16">

                                    <div style="position: absolute;top:68mm !important;">
                                        <span style="font-size:8pt;line-height: 11pt;"><strong>Currency</strong></span><br/>

                                        <span style="font-size:10pt;line-height: 13pt;" t-field="o.currency_id.name"/>
                                    </div>

                                    <div style="position: absolute;margin-left: 20mm;top:68mm !important;">

                                        <span style="font-size:8pt;line-height: 11pt;"><strong>Amount</strong></span><br/>

                                        <t t-set="formated_amount"
                                           t-value="('%.2f' % (o.residual)).split(' ')[0].replace(',',' ')"/>
                                        <span style="font-size:10pt;line-height: 13pt;" t-esc="formated_amount"/>

                                    </div> 

                                </div>

                            <div style="font-size:7pt;line-height:8pt;margin-top:26mm;">
                                <p>
                                    <span><strong>Name AV1:</strong></span><br/>
                                    <span><strong>Name AV2:</strong></span>
                                </p>
                            </div>


                        </td>
                    </tr>
                </table>

                <!-- <div class="swissqr_content" t-if="o.display_swiss_qr_code()">
                    <div class="swissqr_body"
                         t-if="o.partner_bank_id.validate_swiss_code_arguments(o.partner_bank_id.currency_id, o.partner_id) and ((o.currency_id.name == 'EUR') or (o.currency_id.name == 'CHF'))" 
                         style="position: relative;
                                background-color: white;
                                border-color:black;
                                border-width: 1pt 1pt 1pt 1pt;
                                border-style: solid;
                                height: 105mm;
                                width: 210mm;
                                top: 135mm;
                                left: 10mm;">
                        <div id="title_zone" class="swissqr_column_left title_zone">
                            <span class="swissqr_text title title_zone">QR-bill payment part</span>
                            <br/>
                        </div>

                        <div id="procedure_zone" class="swissqr_column_left procedure_zone">
                            <span class="swissqr_text title">Supports</span>
                            <br/>
                            <span class="swissqr_text content">Credit transfer</span>
                        </div>

                        <img class="swissqr" t-att-src="o.partner_bank_id.build_swiss_code_url(o.residual, o.currency_id.name, o.date_due, o.partner_id, 'QRR',
                        (o.partner_bank_id.bank_id.l10n_ch_postal_eur) if (o.partner_bank_id.currency_id.name == 'EUR') else o.partner_bank_id.bank_id.l10n_ch_postal_chf,
                        (o.reference) if (o.reference) else o.number)"/>
                        <img class="ch_cross" src="/l10n_ch/static/src/img/CH-Cross_7mm.png"/>

                        <div id="indications_zone" class="swissqr_column_right indication_zone">
                            <span class="swissqr_text title">Account</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.partner_bank_id.acc_number"/>
                            <br/>

                            <span class="swissqr_text title">Creditor</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.company_id.name"/>
                            <br/>
                            <span class="swissqr_text content" t-field="o.company_id.street"/>
                            <br/>
                            <span class="swissqr_text content" t-field="o.company_id.country_id.code"/>
                            <span class="swissqr_text content" t-field="o.company_id.zip"/>
                            <span class="swissqr_text content" t-field="o.company_id.city"/>
                            <br/>

                            <span class="swissqr_text title">Reference number</span>
                            <br/>
                            <t t-if="o.partner_bank_id.currency_id.name == 'EUR'">
                                <span class="swissqr_text content"
                                      t-field="o.l10n_ch_isr_number_spaced"/>
                                <br/>
                            </t>
                            <t t-if="o.partner_bank_id.currency_id.name == 'CHF'">
                                <span class="swissqr_text content"
                                      t-field="o.l10n_ch_isr_number_spaced"/>
                                <br/>
                            </t>

                            <span class="swissqr_text title">Additional information</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.reference"/>
                            <br/>

                            <span class="swissqr_text title">Debtor</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.partner_id.name"/>
                            <br/>
                            <span class="swissqr_text content" t-field="o.partner_id.street"></span>
                            <span class="swissqr_text content" t-field="o.partner_id.street2"/>
                            <br/>
                            <span class="swissqr_text content" t-field="o.partner_id.country_id.code"/>
                            <span class="swissqr_text content" t-field="o.partner_id.zip"/>
                            <span class="swissqr_text content" t-field="o.partner_id.city"/>
                            <br/>

                            <span class="swissqr_text title">Due date</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.date_due"/>
                            <br/>
                        </div>

                        <div id="amount_zone" class="swissqr_column_left amount_zone" style="top: 99mm !important;">
                            <span class="swissqr_text title">Currency</span>
                            <br/>
                            <span class="swissqr_text content" t-field="o.currency_id.name"/>
                        </div>

                        <div class="amount_zone amount" style="top: 99mm !important;">
                            <span class="swissqr_text title">Amount</span>
                            <br/>
                            <t t-set="formated_amount"
                               t-value="('%.2f' % (o.residual)).split(' ')[0].replace(',',' ')"/>
                            <span class="swissqr_text content" t-esc="formated_amount"/>
                        </div>
                    </div>
                    <div class="swissqr_body"
                         t-if="(o.partner_bank_id.validate_swiss_code_arguments(o.partner_bank_id.currency_id, o.partner_id) == False) and ((o.currency_id.name == 'EUR') or (o.currency_id.name == 'CHF'))">
                        <div class="swissqr_column_left procedure_zone">
                            <span>Some pieces of this information are not set correctly to display the Swiss QR Code.
                                <br/>
                                -Bank > CHF ISR reference
                                <br/>
                                -Bank > EUR ISR reference
                                <br/>
                                -Your company > Street with number
                                <br/>
                                -Your company > City
                                <br/>
                                -Your company > Zip
                                <br/>
                                -Your company > Country
                                <br/>
                                -Debtor > Street with number
                                <br/>
                                -Debtor > City
                                <br/>
                                -Debtor > Zip
                                <br/>
                                -Debtor > Country
                            </span>
                        </div>
                    </div>
                </div> -->

            </t>
        </template>


        <template id="justthis_customization.qr_code_report_main">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="invoice">
                    <t t-set="o" t-value="invoice"/>
                    <t t-call="justthis_customization.l10n_ch_qr_code_report_template"/>
                </t>
            </t>
        </template>


    </data>
</odoo>
